<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-front-end-development/nextjs/2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Next.js 13 + Kakao Map API 시 CORS 문제 | WELCOME TO MILLIWONKIM POSTS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://milliwonkim.github.io/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://milliwonkim.github.io/img/logo.png"><meta data-rh="true" property="og:url" content="https://milliwonkim.github.io/docs/front-end-development/nextjs/2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="frontend, development, programming, stock, economy, apple, google, meta, facebook, instagram, tiktok, amazon, aws, microsoft, react, nextjs, vercel, javascript, typescript, jsx"><meta data-rh="true" content="zcnlRDhc81xmT4ImRsEKsS7el3lp9F_yrNoTlipMPaI" name="google-site-verification"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Next.js 13 + Kakao Map API 시 CORS 문제 | WELCOME TO MILLIWONKIM POSTS"><meta data-rh="true" name="description" content="문제상황"><meta data-rh="true" property="og:description" content="문제상황"><link data-rh="true" rel="icon" href="/static/img/logo.png"><link data-rh="true" rel="canonical" href="https://milliwonkim.github.io/docs/front-end-development/nextjs/2"><link data-rh="true" rel="alternate" href="https://milliwonkim.github.io/docs/front-end-development/nextjs/2" hreflang="en"><link data-rh="true" rel="alternate" href="https://milliwonkim.github.io/docs/front-end-development/nextjs/2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2f0c5c20.css">
<link rel="preload" href="/assets/js/runtime~main.6977f6c1.js" as="script">
<link rel="preload" href="/assets/js/main.67a8b41c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">MILLIWONKIM POSTS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/front-end-development">Development / Programming</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/milliwonkim" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.linkedin.com/in/kiwon-kim-29b23b106/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/front-end-development">Front-End Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Front-End Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/nextjs">Next.js</a><button aria-label="Toggle the collapsible sidebar category &#x27;Next.js&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/1">Next.js에 Google Drive API를 달아보자</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/10">Dockder Container 안에서 pm2로 next.js 실행하는 방법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/11">Next.js에서 ‘className’ did not match 에러 대응해보기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/12">Next.js에서 SSR일 때 styled-components가 적용되지 않을 때 대응방법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/13">Why “window” object is not defined in Next.js?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/14">how to solve “error unhandledRejection - Error [ERR_HTTP_HEADERS_SENT] - Cannot set headers after they are sent to the client”</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/15">How to fix “Error - error:030810C:digital envelope routines::unsupported” in Next.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/16">How to use Dynamic Route in Next.js (described as Static Site Generation (SSG))</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/17">How to fix “Error - serializing .res.headers returned from ‘getStaticProps’ in `/`. Reason - &#x27;Object&#x27;(&#x27;[object AxiosHeaders]&#x27;) cannot be serialized as JSON. Please only return JSON serializable data types” in Next.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/18">Will fallback of getStaticPaths in Next.js work on Static Sites like S3 or Github Pages?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/front-end-development/nextjs/2">Next.js 13 + Kakao Map API 시 CORS 문제</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/3">Next.js의 렌더링 과정 파악하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/4">Difference between Static Site Generation (SSG) and Server Side Rendering (SSR) in Next.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/5">Next.js에서 “minified react error</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/6">Error - Hydration failed because the initial UI does not match what was renderes on the server를 해결해보자</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/7">next-redux-wrapper를 이용해서 Server와 Client 간의 Redux 공유하기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/8">Next.js에서 Nookies의 path는 뭐에 사용하는 걸까?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/front-end-development/nextjs/9">monorepo 기반의 next.js를 docker에 올려보자</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/react">React</a><button aria-label="Toggle the collapsible sidebar category &#x27;React&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/typescript">TypeScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;TypeScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/javascript">JavaScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/front-end-development"><span itemprop="name">Front-End Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/nextjs"><span itemprop="name">Next.js</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Next.js 13 + Kakao Map API 시 CORS 문제</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Next.js 13 + Kakao Map API 시 CORS 문제</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="문제상황">문제상황<a href="#문제상황" class="hash-link" aria-label="Direct link to 문제상황" title="Direct link to 문제상황">​</a></h2><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// pages/_document.tsx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 121, 198)">Script</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">&quot;dapi.kakao.com...apikey=SOMETHING&quot;</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">strategy</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">beforeInteractive</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이렇게 개발하고 있었고, 카카오 api 를 이용하기 위한 개발자 페이지에서 URL을 등록하고 있었다</p><p>그런대 CORS에러를 만났다.</p><p>응답코드도 200으로 떨어지긴한다.</p><p>스크립크 로딩 문제일 수도 있어서 일반 script 태그로 바꿨는데 문제가 해결되었다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// pages/_document.tsx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">script</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript string" style="color:rgb(255, 121, 198)">&quot;dapi.kakao.com...apikey=SOMETHING&quot;</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">text/javascript</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="일반-script-태그와-nextjs의-스크립트-태그의-차이가-뭘까">일반 script 태그와 Next.js의 스크립트 태그의 차이가 뭘까<a href="#일반-script-태그와-nextjs의-스크립트-태그의-차이가-뭘까" class="hash-link" aria-label="Direct link to 일반 script 태그와 Next.js의 스크립트 태그의 차이가 뭘까" title="Direct link to 일반 script 태그와 Next.js의 스크립트 태그의 차이가 뭘까">​</a></h2><p>Next.js의 <code>Script</code> 컴포넌트와 일반적인 <code>&lt;script&gt;</code> 태그 사이의 동작 차이로 인해 CORS 에러가 발생할 수 있습니다. 이러한 문제의 주요 원인은 다음과 같습니다</p><ol><li><strong>로딩 전략의 차이</strong>:<ul><li><code>Script</code> 컴포넌트는 기본적으로 <code>strategy=&quot;beforeInteractive&quot;</code>를 사용하여 스크립트를 로드합니다. 이는 Next.js 애플리케이션의 JavaScript 번들이 로드되기 전에 외부 스크립트를 로드하려고 시도합니다. 이로 인해 일부 외부 스크립트에서는 예상치 못한 동작이나 에러가 발생할 수 있습니다.</li><li>반면, 일반적인 <code>&lt;script&gt;</code> 태그는 문서의 파싱과 동시에 스크립트를 로드하고 실행합니다.</li></ul></li><li><strong>스크립트의 실행 위치</strong>:<ul><li><code>Script</code> 컴포넌트는 React 컴포넌트의 라이프사이클 내에서 동작하므로, 스크립트의 로딩과 실행이 예상한 위치에서 발생하지 않을 수 있습니다.</li><li><code>&lt;script&gt;</code> 태그는 HTML 문서 내에서 명시적으로 위치가 정해져 있으므로, 스크립트의 로딩과 실행 위치가 명확합니다.</li></ul></li><li><strong>CORS 정책</strong>:<ul><li>일부 외부 스크립트는 동적으로 생성된 스크립트 태그에 대해 CORS 정책을 적용할 수 있습니다. <code>Script</code> 컴포넌트는 내부적으로 동적으로 스크립트 태그를 생성하므로, 이로 인해 CORS 에러가 발생할 수 있습니다.</li><li>반면, <code>&lt;script&gt;</code> 태그는 정적으로 HTML 문서에 포함되므로, 이러한 문제가 발생하지 않을 수 있습니다.</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="해결-방법">해결 방법<a href="#해결-방법" class="hash-link" aria-label="Direct link to 해결 방법" title="Direct link to 해결 방법">​</a></h3><ul><li><code>Script</code> 컴포넌트의 <code>strategy</code> 속성을 <code>afterInteractive</code>로 설정하여, 애플리케이션의 JavaScript 번들이 로드된 후에 외부 스크립트를 로드하도록 할 수 있습니다.</li><li>필요한 경우, <code>&lt;script&gt;</code> 태그를 사용하여 문제를 회피할 수 있습니다.</li></ul><p>결론적으로, Next.js의 <code>Script</code> 컴포넌트와 일반적인 <code>&lt;script&gt;</code> 태그 사이의 동작 차이로 인해 일부 외부 스크립트에서는 CORS 에러나 다른 문제가 발생할 수 있습니다. 따라서, 외부 스크립트를 사용할 때는 해당 스크립트의 동작 방식과 호환성을 고려하여 적절한 방법을 선택하는 것이 중요합니다.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="왜-이것-때문에-cors에러가-발생할-수-있나">왜 이것 때문에 CORS에러가 발생할 수 있나?<a href="#왜-이것-때문에-cors에러가-발생할-수-있나" class="hash-link" aria-label="Direct link to 왜 이것 때문에 CORS에러가 발생할 수 있나?" title="Direct link to 왜 이것 때문에 CORS에러가 발생할 수 있나?">​</a></h2><blockquote><p><code>Script</code> 컴포넌트는 내부적으로 동적으로 스크립트 태그를 생성하므로, 이로 인해 CORS 에러가 발생할 수 있습니다.</p></blockquote><p>CORS(Cross-Origin Resource Sharing)는 웹 페이지의 요청된 출처와 자원의 출처가 다를 때, 해당 자원에 대한 접근 권한을 브라우저에게 알려주는 보안 표준입니다. 웹 페이지는 기본적으로 동일 출처 정책(Same-Origin Policy)을 따르기 때문에, 다른 출처의 자원을 요청할 때는 해당 자원의 서버가 CORS 헤더를 포함해야 합니다.</p><p>Next.js의 <code>Script</code> 컴포넌트가 동적으로 스크립트 태그를 생성할 때 CORS 에러가 발생하는 주요 이유는 다음과 같습니다:</p><ol><li><strong>동적 생성된 스크립트 태그</strong>: <code>Script</code> 컴포넌트는 React의 렌더링 과정 중에 스크립트 태그를 동적으로 DOM에 추가합니다. 이 동적으로 생성된 스크립트 태그는 기존의 HTML 문서에 정적으로 포함된 <code>&lt;script&gt;</code> 태그와는 다르게 동작할 수 있습니다.</li><li><strong>추가적인 요청</strong>: 동적으로 생성된 스크립트는 추가적인 네트워크 요청을 통해 자원을 가져옵니다. 이 때, 해당 자원의 서버가 CORS 헤더를 제공하지 않거나, 요청한 출처를 허용하지 않는 경우 CORS 에러가 발생할 수 있습니다.</li><li><strong>브라우저의 보안 정책</strong>: 브라우저는 사용자의 보안을 위해 동일 출처 정책을 적용합니다. 따라서, 다른 출처의 자원을 요청할 때는 해당 자원의 서버에서 적절한 CORS 헤더를 제공해야 합니다. 동적으로 생성된 스크립트 태그가 이러한 헤더 없이 다른 출처의 자원을 요청하면, 브라우저는 이를 차단하고 CORS 에러를 발생시킵니다.</li></ol><p>따라서, <code>Script</code> 컴포넌트를 사용하여 외부 스크립트를 로드할 때 CORS 에러가 발생한다면, 해당 스크립트의 서버 설정을 확인하거나, 필요한 경우 정적 <code>&lt;script&gt;</code> 태그를 사용하여 문제를 회피할 수 있습니다.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-27T00:00:00.000Z">Oct 27, 2023</time></b> by <b>kiwon kim</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/front-end-development/nextjs/18"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Will fallback of getStaticPaths in Next.js work on Static Sites like S3 or Github Pages?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/front-end-development/nextjs/3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Next.js의 렌더링 과정 파악하기</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#문제상황" class="table-of-contents__link toc-highlight">문제상황</a></li><li><a href="#일반-script-태그와-nextjs의-스크립트-태그의-차이가-뭘까" class="table-of-contents__link toc-highlight">일반 script 태그와 Next.js의 스크립트 태그의 차이가 뭘까</a><ul><li><a href="#해결-방법" class="table-of-contents__link toc-highlight">해결 방법</a></li></ul></li><li><a href="#왜-이것-때문에-cors에러가-발생할-수-있나" class="table-of-contents__link toc-highlight">왜 이것 때문에 CORS에러가 발생할 수 있나?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/milliwonkim" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/kiwon-kim-29b23b106/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Milliwonkim(KIWON KIM). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6977f6c1.js"></script>
<script src="/assets/js/main.67a8b41c.js"></script>
</body>
</html>