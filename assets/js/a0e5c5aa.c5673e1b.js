"use strict";(self.webpackChunkmilliwonkim_blog_site=self.webpackChunkmilliwonkim_blog_site||[]).push([[2367],{3905:(e,n,t)=>{t.d(n,{Zo:()=>i,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),l=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},i=function(e){var n=l(e.components);return r.createElement(s.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,i=c(e,["components","mdxType","originalType","parentName"]),m=l(t),u=a,g=m["".concat(s,".").concat(u)]||m[u]||d[u]||o;return t?r.createElement(g,p(p({ref:n},i),{},{components:t})):r.createElement(g,p({ref:n},i))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,p=new Array(o);p[0]=u;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c[m]="string"==typeof e?e:a,p[1]=c;for(var l=2;l<o;l++)p[l]=t[l];return r.createElement.apply(null,p)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},6873:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var r=t(7462),a=(t(7294),t(3905));const o={title:"Create React App + Lerna\ub85c \ubaa8\ub178\ub808\ud3ec \uad6c\uc131\ud558\uae30(CRA + Lerna To Set Monorepo)"},p=void 0,c={unversionedId:"front-end-development/reactjs/4",id:"front-end-development/reactjs/4",title:"Create React App + Lerna\ub85c \ubaa8\ub178\ub808\ud3ec \uad6c\uc131\ud558\uae30(CRA + Lerna To Set Monorepo)",description:"- packages",source:"@site/docs/front-end-development/reactjs/4.md",sourceDirName:"front-end-development/reactjs",slug:"/front-end-development/reactjs/4",permalink:"/docs/front-end-development/reactjs/4",draft:!1,tags:[],version:"current",lastUpdatedBy:"milliwonkim",lastUpdatedAt:1698473076,formattedLastUpdatedAt:"Oct 28, 2023",frontMatter:{title:"Create React App + Lerna\ub85c \ubaa8\ub178\ub808\ud3ec \uad6c\uc131\ud558\uae30(CRA + Lerna To Set Monorepo)"},sidebar:"developmentSidebar",previous:{title:"\ube0c\ub77c\uc6b0\uc800\uac00 \ub80c\ub354\ub9c1\ud558\ub294 \uc8fc\uae30\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uc790(Feat. requestAnimationFrame)",permalink:"/docs/front-end-development/reactjs/39"},next:{title:"setInterval\uc758 delay\uc758 \uc2dc\uac04\uc740 \ubcf4\uc7a5\ub418\ub294\uac00?",permalink:"/docs/front-end-development/reactjs/40"}},s={},l=[],i={toc:l},m="wrapper";function d(e){let{components:n,...o}=e;return(0,a.kt)(m,(0,r.Z)({},i,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// react-monorepo\ub77c\ub294 \ud3f4\ub354\ub97c \ub9cc\ub4e4\uace0 yarn init\nmkdir react-monorepo && yarn init\n\n// react-monorepo\uc548\uc5d0\uc11c packages \ud3f4\ub354\ub97c \ub9cc\ub4e0\ub2e4\ncd react-monorepo && mkdir packages\n\n// packages \ud3f4\ub354 \uc548\uc5d0\uc11c \uc774\uc6a9\ud560 \ud328\ud0a4\uc9c0\ub4e4\uc744 \uad6c\uc131\ud55c\ub2e4// \uc608\uc2dc\ub85c CRA\ub85c web, common \ud328\ud0a4\uc9c0\ub97c \uad6c\uc131\ud55c\ub2e4\ncd packages && npx create-react-app web && npx create-react-app common\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"packages",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"/web: \ud398\uc774\uc9c0\ub97c \ub80c\ub354\ub9c1 \ud560 \ud504\ub85c\uc81d\ud2b8(\uc774\uac78 deploy \ud574\uc57c\ud568)"),(0,a.kt)("li",{parentName:"ul"},"/common: web\uc5d0 \uc0ac\uc6a9\ud560 \ucef4\ud3ec\ub10c\ud2b8 \uc81c\uacf5")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// react-monorepo \ub9e8 \uc0c1\uc704 \ub8e8\ud2b8\ub85c \ub3cc\uc544\uc628\ub2e4\ncd react-monorepo\nlerna init\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// lerna.json(root)\n\n{\n  "packages": ["packages/*"],\n  "npmClient": "yarn",\n  "useWorkspaces": true,\n  "version": "0.0.0"\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// package.json(root)// \ubaa8\ub4e0 devDependencies\ub294 root package.json\uc5d0 \uc788\uc5b4\uc57c\ud568\n{\n  "name": "@allight/monorepo-test-root",\n  "private": true,\n  "workspaces": [\n    "packages/*"\n  ],\n  "scripts": {\n    "build": "lerna run build"\n  },\n  "devDependencies": {\n    "lerna": "^5.1.8"\n  }\n}\n')),(0,a.kt)("p",null,"\ubc30\ud3ec\ud560 \ud328\ud0a4\uc9c0 \uad6c\uc131"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// deploy\ud560 \ud328\ud0a4\uc9c0\uc5d0\uc11c \uad6c\uc131(web \ud328\ud0a4\uc9c0)\nyarn add -D craco && cd packages/web && touch craco.config.js\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// packages/web/craco.config.jsconst path = require("path");\nconst { getLoader, loaderByName } = require("@craco/craco");\n\nconst packages = [];\npackages.push(path.join(__dirname, "../common"));\npackages.push(path.join(__dirname, "../ui-components"));\n\nmodule.exports = {\n  webpack: {\n    configure: (webpackConfig, arg) => {\n      const { isFound, match } = getLoader(\n        webpackConfig,\n        loaderByName("babel-loader")\n      );\n      if (isFound) {\n        const include = Array.isArray(match.loader.include)\n          ? match.loader.include\n          : [match.loader.include];\n\n        match.loader.include = include.concat(packages);\n      }\n\n      return webpackConfig;\n    },\n  },\n};\n')),(0,a.kt)("p",null,"\uac01 \ud328\ud0a4\uc9c0\ub97c link"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// deploy\ud560 \ud328\ud0a4\uc9c0\uc778 @allight/monorepo-test-web\uc5d0// @allight/monorepo-test-common \ud328\ud0a4\uc9c0\ub97c// dependency\uc5d0 npm link\ucc98\ub7fc \ub9c1\ud06c\ud55c\ub2e4\n\nnpx lerna add @allight/monorepo-test-common --scope=@allight/monorepo-test-web\nnpx lerna add @allight/monorepo-test-ui-components --scope=@allight/monorepo-test-web\n")),(0,a.kt)("p",null,"\ubaa8\ub4e0 \ud328\ud0a4\uc9c0\ub4e4\uc744 \ub3d9\uc2dc\uc5d0 start\ud574\uc11c \uc218\uc815\uc0ac\ud56d \ubc14\ub85c \ubc18\uc601\uac00\ub2a5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// package.json(common \ud328\ud0a4\uc9c0)\n{\n  "name": "@allight/monorepo-test-common",\n  "version": "0.1.0",\n  "private": true,\n// \uc5ec\uae30\ub97c \ud1b5\ud574\uc11c \ucef4\ud3ec\ub10c\ud2b8\ub97c \uac00\uc838\uc634"main": "./src/index.tsx",\n  "dependencies": {\n    "npm-run-all": "^4.1.5",\n    "react": "^18.2.0",\n    "react-dom": "^18.2.0",\n    "react-scripts": "5.0.1",\n    "styled-components": "^5.3.5"\n  },\n  "scripts": {\n    "start": "tsc -w",\n    "build": "react-scripts build",\n    "test": "react-scripts test",\n    "eject": "react-scripts eject"\n  },\n  "eslintConfig": {\n    "extends": [\n      "react-app",\n      "react-app/jest"\n    ]\n  },\n  "browserslist": {\n    "production": [\n      ">0.2%",\n      "not dead",\n      "not op_mini all"\n    ],\n    "development": [\n      "last 1 chrome version",\n      "last 1 firefox version",\n      "last 1 safari version"\n    ]\n  }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// \ubaa8\ub4e0 \ud328\ud0a4\uc9c0\ub4e4\uc758 build \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud568\nnpx lerna run build\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// \ud328\ud0a4\uc9c0\ub4e4 \ubaa8\ub450\uc758 start \uba85\ub839\uc744 \ub3d9\uc2dc\uc5d0 \uc2e4\ud589\ud574\uc11c// @allight/monorepo-test-common\uc758 start \uc2a4\ud06c\ub9bd\ud2b8\uc640// @allight/monorepo-test-web\uc758 start \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ub3d9\uc2dc\uc5d0 \uc2e4\ud589\ud568// \ub530\ub77c\uc11c @allight/monorepo-test-common\uc758 \uc218\uc815\uc0ac\ud56d\uc774 \ubc14\ub85c\ubc14\ub85c \ubc18\uc601\ub428// yarn start \uc548\ud574\ub3c4\ub428\nnpx lerna run start --parallel\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// package.json(web \ud328\ud0a4\uc9c0)\n\n{\n  "name": "@allight/monorepo-test-web",\n  "version": "0.1.0",\n  "private": true,\n  "dependencies": {\n    "@allight/monorepo-test-common": "^0.1.0",\n    "@allight/monorepo-test-ui-components": "^0.1.0",\n    "@testing-library/jest-dom": "^5.16.4",\n    "@testing-library/react": "^13.3.0",\n    "@testing-library/user-event": "^13.5.0",\n    "@types/jest": "^27.5.2",\n    "@types/node": "^16.11.43",\n    "@types/react": "^18.0.15",\n    "@types/react-dom": "^18.0.6",\n    "npm-run-all": "^4.1.5",\n    "react": "^18.2.0",\n    "react-dom": "^18.2.0",\n    "react-scripts": "5.0.1",\n    "typescript": "^4.7.4",\n    "web-vitals": "^2.1.4"\n  },\n  "scripts": {\n    "start": "craco start",\n    "build": "craco build",\n    "test": "craco test",\n    "eject": "craco eject"\n  },\n  "eslintConfig": {\n    "extends": [\n      "react-app",\n      "react-app/jest"\n    ]\n  },\n  "browserslist": {\n    "production": [\n      ">0.2%",\n      "not dead",\n      "not op_mini all"\n    ],\n    "development": [\n      "last 1 chrome version",\n      "last 1 firefox version",\n      "last 1 safari version"\n    ]\n  },\n  "devDependencies": {\n    "@craco/craco": "^6.4.5"\n  }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'// App.tsx(web \ud328\ud0a4\uc9c0(deploy\ud560 \ud328\ud0a4\uc9c0))import { Button } from "@allight/monorepo-test-common";\nimport "./App.css";\nimport { TestHeader } from "@allight/monorepo-test-ui-components";\n\nfunction App() {\n  return (\n    <div className="App">\n      <h1>2022 15.34</h1>\n      <Button>jjfidosjafisjdofisaja</Button>\n      <TestHeader />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:t(4383).Z,width:"2000",height:"2032"})),(0,a.kt)("p",null,"\uc18c\uc2a4\ucf54\ub4dc:\xa0",(0,a.kt)("a",{parentName:"p",href:"https://github.com/milliwonkim/react-monorepo"},"https://github.com/milliwonkim/react-monorepo")))}d.isMDXComponent=!0},4383:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/1-de610a303319aea087a4b69f3e69ef42.png"}}]);